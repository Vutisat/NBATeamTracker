<!doctype html>
<html>
	<head>
		<title>Chicago</title>
		<link rel="stylesheet" href="Styles/main.css">
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

		<!-- Optional theme -->
		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
		

		<script>
			//This function calls the official stats.nba.com API to ge the roster of the team
			function getRoster(){
				$.ajax({
				    type: "GET",
				    url: "http://stats.nba.com/stats/commonteamroster/?Season=2015-16&TeamID=1610612741",
				    //They have padding so jsonp works
				    dataType: "jsonp",
				    success: processData,
				    error: function(){ console.log("Something went wrong");; }
				});

				function processData(data)
				{	
					//console.log(data);
					//var obj = JSON.parse(data);
					var obj = JSON.stringify(data);
					//console.log(typeof(obj));
					var obj2 = JSON.parse(obj);

					//The following creates html to display the players
				    var playerList = ""
				    for(i=0; i<12;i++){
				    	playerList += obj2.resultSets[0].rowSet[i][3] + "<br>"
				    }

				    //inserting the players into the html
				    document.getElementById("roster").innerHTML = playerList;
				}
			}

			//Let's get the weather of where the Chicago Bulls plays
			function getWeather(){
				    var jsonData = {"key":"5032c61cb893a190","field1":12};
				    var data = JSON.stringify(jsonData);
				    $.ajax({
					type: 'GET',
					url:'http://api.wunderground.com/api/88892b73b5f61627/conditions/q/60612.json',
					headers: {},
					data: data,
					dataType:'json',
					success:function(data) {
					    console.log("weather retrieved");
					    var w = data.current_observation.wind_mph;
					    var d = data.current_observation.weather;
					    var t = data.current_observation.temperature_string;
					    var feel = data.current_observation.feelslike_string;
					    var icon = data.current_observation.icon_url
				            document.getElementById("weather").innerHTML = ("<img src= " + icon + " >" + "<br>Weather status is: "+ d + "<br>Temperature is: " + t +" <br>wind speed is: "+ w + "<br>Feels Like: " + feel);
					    },
					error:function(data){
					    console.log("Something went wrong");
					    }
					});
				}				

			window.onload = function() {
			  getRoster();
			  getWeather();
			};
		</script>
	</head>

	<body>
		<a href="index.html" style="float:left">
		<button type="button" class="btn btn-info">&lt; GO BACK TO HOMEPAGE</button>
		</a>
		<p style="font-size: 50px; text-align:center"><strong>Chicago Bulls</strong></p>
		
		<center><p style="font-size: 30px;"><strong>Current Roster from NBA API:</strong></p></center>
		<center>
			<div id="roster">
				
			</div>
			<p style="font-size: 30px;"><strong>Weather at the United Center:</strong></p>
			<div id="weather">
				
			</div>
		</center>


		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<!-- Include all compiled plugins (below), or include individual files as needed -->
		<script src="js/bootstrap.min.js"></script>
		<!-- Latest compiled and minified JavaScript -->
		<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	</body>
</html>